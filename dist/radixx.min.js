/*!
  * @lib: Radixx
  * @version: 0.1.0
  * @author: Ifeora Okechukwu
  * @created: 30/12/2016
  *
  * All Rights Reserved 2016 - 2018.
  * Use, reproduction, distribution, and modification of this code is subject to the terms and
  * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
  *
  * @desc: Implementation of Facebooks' Flux Architecture with a Twist.
  */
!function(n,t){var i="undefined";typeof module==i||!module.exports?typeof define==i||!define.amd?n.Radixx=t(n):define("Radixx",function(){return t(n)}):module.exports=n!=void 0?t(n):t({})}(this,function(n,t){var y="constructor",g="undefined",u="function",v="string",r=!1,i=null,s="object",f=!0;function o(){this.toString=function(){return"[object Hub]"},this.Helpers={isEqual:function(n,t){var u,o,h,e;if(n===t)return f;if(typeof n!=s||n===i||typeof t!=s||t===i||(u=Object.keys(n),o=Object.keys(t),u.length!==o.length))return r;for(h=hasOwnProperty.bind(t),e=0;e<u.length;e++)if(!h(u[e])||n[u[e]]!==t[u[e]])return r}},this.Payload={type:{array:"array",date:"date",string:v,regexp:"regexp","function":u,object:s,number:"number",nullable:function(n){return n===i||n===t},numeric:{Int:function(n){return isFinite(n)&&n===parseInt(n)},Float:function(n){return isFinite(n)&&n===parseFloat(n)}},any:function(n){return n!==i||n!==t}}}}var e={}.hasOwnProperty,lt=n.onbeforeunload,ut=n.onunload,nt=i,ft={runtime:{spaMode:f,shutDownHref:""},persistenceEnabled:r},h=[].slice,et={typesMap:{number:Number,array:Array,object:Object,string:String,date:Date,regexp:RegExp,"function":Function},isOfType:function(n,t){var n=n.toLowerCase();return typeof n==u?n(t):typeof n==v&&n in this.typesMap?/^string|function$/.test(typeof t)||Object(t)instanceof this.typesMap[n]:r}},p=function(n,r,u){u===t&&(u=i);for(var f in n)e.call(n,f)&&r.call(u,n[f],f,n)},tt=function(n,t){var u={},r;for(r in t)if(e.call(t,r)){if(typeof t[r]==s&&t[r]!==i)return tt(n[r],t[r]);u[r]=e.call(n,r)?n[r]:t[r]}return u},it=function(){return},rt=function(n,t,i){return function(){var r=h.call(arguments);return n.apply(i,t.concat(r))}};Array.prototype.forEach=Array.prototype.forEach||function(n,t){return p(this,n,t)},Array.prototype.reduceRight=Array.prototype.reduceRight||function(n){"use strict";if(i===this||g==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if(u!=typeof n)throw new TypeError(callback+" is not a function");var r=Object(this),e=r.length>>>0,t=e-1,f;if(arguments.length>=2)f=arguments[1];else{while(t>=0&&!(t in r))t--;if(t<0)throw new TypeError("Reduce of empty array with no initial value");f=r[t--]}for(;t>=0;t--)t in r&&(f=callback(f,r[t],t,r));return f},Function.prototype.bind=Function.prototype.bind||function(n){return rt(this,[].slice(arguments,1),n)},function(n,u){"use strict";function f(i,f){var o,e;f=f||{bubbles:r,cancelable:r,detail:t};try{e=u.createEvent("CustomEvent"),e.initCustomEvent(i,f.bubbles,f.cancelable,f.detail)}catch(h){e=u.createEventObject(n.event),e.cancelBubble=!f.bubbles,e.returnValue=!f.cancelable,typeof f.detail==s&&(e.detail=f.detail)}return e}try{var e=new n.CustomEvent("test")}catch(o){f.prototype=Object.create(n.Event&&n.Event.prototype||{}),n.CustomEvent=i,n.CustomEvent=f}}(n,n.document),Object.create=Object.create||function(n,t){function u(){}if(n===i||!(n instanceof Object))throw TypeError("");var r;if(u.prototype=n,typeof t==s)for(r in t)e.call(t,r)&&(u[r]=t[r]);return new u},Object.keys=Object.keys||function(n){"use strict";var h="toString";var t,r,c,f,i,o;if(typeof n==s||typeof n==u){t=[];for(r in fuc)e.call(fuc,r)&&t.push(r);if(c=!ob.propertyIsEnumerable(h),f=[h,"toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable",y],c)for(i=0;i<f.length;i++)o=f[i],e.call(fuc,o)&&t.push(o);return t}};var ot=function(){var n=["graph-ql"],t={};return function(n){var t=this,r=t;t.getTitle=function(){return n},t.toJSON=function(){return{title:n}},t.makeTrait=function(n){var t=h.call(arguments,1);return typeof n==u?(t.unshift(this),n.apply(i,t)):i},t.toString=function(){return"[object RadixxStore]"}}}(),st=function(){return function(n){this.getId=function(){return n},this.toJSON=function(){return{id:n}},this.toString=function(){return"[object RadixxAction]"}}}(),l={STARTED:0,AWAIT:1,RESOLVED:2,REJECTED:3},ht=function(n){var t={},i=String(n).split(",");return i.forEach(function(n){t[n]=f}),t.savedData=!1,t},w=function(n){var o=ht(n),a,y,l,w,b,e=[],s=o.multiple&&[],c=function(n){for(o.savedData=!c.$decline&&o.save&&n,w=f,b=f,l=a||0,y=e.length,a=0;l<y;l++)setTimeout(rt(e[l],n[1],n[0]),20);if(b=r,s&&s.length)return c(s.shift());c.$decline=r,o.savedData&&o.unpack&&(e.length=0)};return{add:function(){var n=0,t;return e&&(t=e.length,function i(t){t.forEach(function(t){var r=typeof t;r==u?n=e.push(t):!!t&&t.length&&typeof t!=v&&i(h.call(t))})}(h.call(arguments)),w&&o.join&&(a=t,y=n,c.$decline=f,c(o.savedData),this.disable())),n},hasFn:function(n){var t=r;return p(e,function(i){typeof n==u&&n===i&&(t=f)},this),t},hasList:function(){return!!e},fireWith:function(){if(e&&(!w||s)){var n=arguments.length&&h.call(arguments)||[i,0];b?s.push(n):c(n)}},disable:function(){o.savedData||(e=s=t)}}},a=function(){var y="join",t={resolve:["done","RESOLVED",w([y,"save"])],reject:["fail","REJECTED",w([y,"save"])],notify:["progress","AWAIT",w([y,"multiple"])]},n=this,c=Object.keys(t),v=function(i,r,u){var e=i!="notify";return!r.length&&!u?t[i][2].fireWith:u?function(){return n.state>=0&&n.state<=1&&t[i][2].add.apply(n,h.call(arguments)),n}:function(){if(n.state>=0&&n.state<=1&&(n.state=l[t[i][1]]),t[i][2].fireWith(n===this?n:this,[].slice.call(arguments)),e){t[r[0]][2].disable(),t[r[1]][2].disable();switch(i){case"reject":case"resolve":n.state=l[t[i][1]]}}return f}},p=0,b=c.slice(),o,r={};for(o in t)e.call(t,o)&&(c.splice(p++,1),n[o]=v(o,c),n[o+"With"]=v(o,[]),r[t[o][0]]=v(o,[],f),c=b.slice());return r.state=l.STARTED,r.always=function(){return this.done.apply(n,arguments).fail.apply(n,arguments)},r.promise=function(n){if(n&&typeof n==s&&!n.length){for(var t in r)e.call(r,t)&&(n[t]=r[t]);return n}return r},r.then=function(){var i,r=[].slice.call(arguments);return r.forEach(function(r,f){r=typeof r==u&&r,n[t[c[f]][0]](function(){var n;try{n=r&&r.apply(this,arguments)}catch(t){n=this.reject(t)}finally{n&&typeof n.promise==u&&(i=n.promise())}})}),n.promise(i)},r.isResolved=function(){return!t.reject[2].hasList()},r.isRejected=function(){return!t.resolve[2].hasList()},r.pipe=r.then,r.promise(n),a.STARTED=l.STARTED,a.AWAITING=l.AWAIT,a.RESOLVED=l.RESOLVED,a.REJECTED=l.REJECTED,v=b=o=p=i,n instanceof a?n:new a},c=function(n){var gt="swapCallback",wt="getQuerySchema",yt="disconnect",bt="getState",kt="unsetChangeListener",dt="setChangeListener",ct="hydrate",pt="remainingSpace",ut=":=:",k="|",ni="storesignal";function h(){this.middlewares=[],n.document.addEventListener?(n.addEventListener("storage",fi,r),n.document.addEventListener(ni,ei,r)):n.document.attachEvent&&(n.document.attachEvent("onstorage",fi),n.document.attachEvent("onstoresignal",ei)),b.$$undoActionsStack=[],b.$$redoActionsStack=[]}var lt=i,ti=n.top!==n||!n.localStorage?i:n.localStorage,s=n.top!==n||!n.sessionStorage?n.opera&&!e.call(n,"opera")?n.opera.scriptStorage:{}:n.sessionStorage,oi=n.document.documentMode||0,hi={},ot=[],l={},w=[],o={},d={},ii=[],st={},rt={},ri=function(n){var t="__proto__";if("getPrototypeOf"in Object)return Object.getPrototypeOf(n);if(t in n){if(!e.call(n,t))return n.__proto__}else if(y in n&&!e.call(n,y))return n.constructor.prototype;return n},c=function(n){return n===void 0},si=function(n,t,i){var o="target",e=new CustomEvent(t,{detail:i,cancelable:f,bubbles:r}),s=function(){return r};return o in e||e.cancelBubble!==f||n.setCapture(f),s=n[o in e?"dispatchEvent":"fireEvent"],s.apply(n,o in e?[e]:["on"+t,e])},b=function(n,u,f,e){n.$$history.length!=1||n.$$initData||(n.$$initData=n.$$history[0]),n.$$history=n.$$history.slice(0,n.$$historyIndex+1);var o=r,s;if(u===i?(n.$$history.length=0,o=f.actionData):(e._aspect=f.actionKey,e._type=f.actionType,o=n.call(u,f,e.get())),typeof o=="boolean"||o==t){throw new TypeError("Radixx: Application State unavailable after signal to Dispatcher");return}e.put(o),s=n.$$history.push(o),n.$$historyIndex++,n.$$history.length>21&&n.$$history.unshift()},ht=function(n){if(c(n)||n==="null")return i;try{return JSON.parse(n)}catch(t){return String(n)}},at=function(n){c(n)&&(n=i);try{return JSON.stringify(n)}catch(t){return String(n)}},vt=function(){var f={},r,e,o,h,t;if("key"in s&&typeof s.key==u)for(t=0;t<s.length;t++)r=s.key(t),f[r]=ht(s.getItem(r))||i;else for(t=0;t<w.length;t++)r=w[t],rt[r]&&(e=n.name.indexOf(r),o=n.name.indexOf(k,e),h=n.name.substring(e,o).split(ut)),f[r]=ht(h[1])||i;return f},it=function(t){var r=this;return r.put=function(i){var r,f,e=pt in s&&oi===8;e&&typeof s.begin==u&&s.begin();try{s.setItem(t,at(i))}catch(o){rt[t]&&(r=n.name.indexOf(t),f=n.name.indexOf(k,r),n.name=n.name.replace(n.name.substring(r,f),"")),n.name===""?n.name=t+ut+at(i)+k:n.name+=t+ut+at(i)+k,rt[t]=1}return e&&typeof s.commit==u&&s.commit(),si(n.document,ni,{url:n.location.href,key:t,newValue:i,source:n,aspect:this._aspect,type:this._type},n),i},r.get=function(){var r,u,f;return rt[t]?(r=n.name.indexOf(t),u=n.name.indexOf(k,r),f=n.name.substring(r,u).split(ut)||[0,0],ht(f[1])||i):ht(s.getItem(t))||i},r.del=function(){var i,r;if(rt[t])i=n.name.indexOf(t),r=n.name.indexOf(k,i),n.name=n.name.replace(n.name.substring(i,r),"");else return s.removeItem(t)},r},ui=function(){var t=i,u=vt(),n,r;for(n in d)e.call(d,n)&&(t=d[n],t.isResolved()||t.resolve(),delete d[n]);ii.length=0;for(r in ot)e.call(ot,r)&&ot[r].call(i,u);c(nt)||ti===i||ti.setItem("_tag",JSON.stringify(u))},fi=function(n){pt in s&&n.detail.source===i},ei=function(t){var i,u,r;if(t=t||n.event,w.indexOf(t.detail.key)>-1&&(i=t.detail.key,!c(o[i])))for(u=o[i].$$store_listeners,r=0;r<u.length;r++)u[r].call(l[i],t.detail.type,t.detail.aspect)};return h.prototype.setMiddleware=function(n){if(typeof n==u)return this.middlewares.push(n);throw new Error("Inavlid Middleware Callback -");},h.prototype.hasMiddleware=function(){return this.middlewares.length>0},h.prototype.getRegistration=function(n){return e.call(o,n)?o[n]:{}},h.prototype.register=function(n,t,i){if(e.call(o,n)){if("$$history"in o[n]&&typeof t.$$history==g){if(!l[n]){throw new Error("Radixx: Cannot Overwrite existing store registration");return}t.$$history=o[n].$$history,t.$$historyIndex=o[n].$$historyIndex,t.$$store_listeners=o[n].$$store_listeners,o[n]=t}}else t.$$store_listeners=[],t.$$history=[!i?[]:i],t.$$historyIndex=0,o[n]=t,w.push(n);return f},h.prototype.watch=function(n){ot.push(n)},h.prototype.setStoreListener=function(n,t){var i=n.getTitle();c(o[i])||typeof t==u&&(l[i]=n,o[i].$$store_listeners.push(t))},h.prototype.unsetStoreListener=function(n,t){var i=n.getTitle(),r;c(o[i])||typeof t==u&&(r=o[i].$$store_listeners.indexOf(t),o[i].$$store_listeners.splice(r,1))},h.prototype.signalUnique=function(t){if(t.source==ct){n.setTimeout(ui,0);var r=new it(t.target);b.$$redoActionsStack.length=0,b.$$redoActionsStack.push(t),b.apply(i,[o[t.target],i,t,r])}},h.prototype.signal=function(t){var r=this,u=i,f=function(n,t,r){var f,o=i;b.$$redoActionsStack.push(r);for(f in n)e.call(n,f)&&(o=new it(f),b.apply(i,[n[f],t.queueing,r,o]));return vt()};t.source in st&&(u=r.hasMiddleware()?r.middlewares.concat(f.bind(i,o,r)).reduceRight(function(n,t){return t.bind(i,n)}):f.bind(i,o,r),n.setTimeout(ui,0),c(u)||u(t,vt()))},h.prototype.unregister=function(n){var t,u,r;c(o[n])||(t=o[n],u=l[n],t.$$store_listeners.length=0,t.$$store_listeners=i,t.$$historyIndex=i,t.$$history.length=0,t.$$history=i,delete o[n],t=i,delete l[n],u=i,r=w.indexOf(n),r!=-1&&w.splice(r,1))},h.prototype.queueing={await:function(n,t){for(var r=-1,e=n.length+r,f=i;++r<e;)f=ii.indexOf(n[r])>-1?d[n[r]]:d[n[r]]=new a,typeof t==u&&f.then(t)}},{getInstance:function(){return lt===i&&(lt=new h),lt},eachStore:function(n,t,r){p(w,t.bind(r=[],l));var u=n,f=r.length-1,e=function(){var n;return f>=0?n=Boolean(u.call(i,r[f--],e)):(u=!0,n=u),n};e()},setActionVectors:function(n,t){var f=ri(n),o=this.getInstance(),u=i,r;for(r in t)e.call(t,r)&&(u=t[r],f[r]=this.createActionInterface(o,u));return n},createStoreInterface:function(n,t){return function(){var e=this,u,o,s=arguments.length?arguments[0]:i,h,a,y;return t==dt?n.setStoreListener(e,s):t==kt?n.unsetStoreListener(e,s):t==bt?(o=new it(e.getTitle()),h=o.get(),o=i,h===o)?(u=n.getRegistration(e.getTitle()),u.$$history.length&&u.$$history[0]):typeof s==v&&s in h?h[s]:h:t=="destroy"?(a=e.getTitle(),a in l&&delete l[a],o=new it(e.getTitle()),o.del(),o=i):t==yt?n.unregister(e.getTitle()):t==ct?c(s)?void 0:n.signalUnique({source:t,target:e.getTitle(),actionData:s}):t==wt?{}:t=="setQuerySchema"?f:t=="canUndo"?(u=n.getRegistration(e.getTitle()),u.$$historyIndex!=0):t==gt?n.register(e.getTitle(),s):t=="canRedo"?(u=n.getRegistration(e.getTitle()),u.$$historyIndex!==u.$$history.length-1):t=="undo"?(u=n.getRegistration(e.getTitle()),o=new it(e.getTitle()),e.canUndo()?(--u.$$historyIndex,o.put(u.$$history[u.$$historyIndex]),u=i,o=i,f):r):t=="redo"?(u=n.getRegistration(e.getTitle()),o=new it(e.getTitle()),e.canRedo()?(++u.$$historyIndex,o.put(u.$$history[u.$$historyIndex]),u=i,o=i,f):r):void 0}},createActionInterface:function(n,t){if(!(t instanceof Object))throw new TypeError("Invalid Action Creator Vector, expected [object] but found ["+typeof t+"]");return function(r,u){var f=this.getId();if(c(st[f])||st[f].actionTypes.push(t),t.actionDefinition&&!et.isOfType(t.actionDefinition,r))throw new TypeError("Action Data Invalid for action: ["+t.type+"]");return n.signal({source:f,actionType:t.type,actionKey:u||i,actionData:r})}},watchDispatcher:function(n){var t=this.getInstance();t.watch(n)},mergeConfig:function(n){return tt(n,ft)},registerAction:function(){var n=Math.random().toString(16).substr(2,13);return st[n]={actionTypes:[]},n},makeAggregator:function(){return{notifyAllStores:function(){}}},setMiddlewareCallback:function(n){var t=this.getInstance();try{t.getMiddleware()}catch(i){t.setMiddleware(n)}},setStoreObserver:function(n,t,r){var o,f;if(typeof t!=u)return i;var h=ri(n),s=this.getInstance(),c=n.getTitle(),e=i;for(s.register(c,t,r),o=[dt,kt,bt,yt,wt,"canRedo","canUndo",gt,"undo","redo",ct,"destroy"],f=0;f<o.length;f++)e=o[f],h[e]=this.createStoreInterface(s,e)}}}(n);o.prototype.constructor=o,o.prototype.onShutdown=function(n){typeof n==u&&(it=n)},o.prototype.onDispatch=function(n){typeof n==u&&c.watchDispatcher(n)},o.prototype.requestAggregator=function(){return c.makeAggregator()},o.prototype.eachStore=function(n){return c.eachStore(n,function(n,t){this.push(n[t])},i)},o.prototype.makeActionCreators=function(n){function t(){st.apply(this,h.call(arguments))}var i=new t(c.registerAction());return c.setActionVectors(i,n)},o.prototype.makeStore=function(n,t,i){function u(){ot.apply(this,h.call(arguments))}var r=new u(n);return c.setStoreObserver(r,t,i),r},o.prototype.attachMiddleware=function(n){c.setMiddlewareCallback(n)};var b=new o,k=r,d=function(n){var i=window.currentFocusElement||n.originalEvent.explicitOriginalTarget||n.originalEvent.srcDocument&&n.originalEvent.srcDocument.activeElement||n.originalEvent.currentTarget&&n.originalEvent.currentTarget.document.activeElement,u="Are you sure you want to leave this page ?",e="href"in i&&i.href.indexOf(d.$$href)>-1,t=function(){k=t.lock};return t.lock=k=f,beforeUnloadTimer=setTimeout(t,0),e&&(n.originalEvent.returnValue=u),e?(t.lock=r)||u:clearTimeout(beforeUnloadTimer)},ct=function(n){k||setTimeout(function(){var t={};b.eachStore(function(n,i){var r=n.getTitle();t[r]=n.getState(),n.disconnect(),n.destroy(),i()}),it(t),ut(n)},0)};return b.constructor.prototype.configure=function(t){var i=c.mergeConfig(t);i.runtime.spaMode||typeof i.runtime.shutDownHref==v&&i.runtime.shutDownHref.length!=0&&(d.$$href=i.runtime.shutDownHref,n.onbeforeunload=d,n.onunload=ct),i.persistenceEnabled&&(nt="0x3674993769129020")},b})