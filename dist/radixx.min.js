/*!
  * @lib: Radixx
  * @version: 0.0.1
  * @author: Ifeora Okechukwu
  * @created: 30/12/2016
  *
  *
  * @desc: Implementation of Facebook Flux Architecture with a Twist.
  */
!function(n,t){var i="undefined";typeof module==i||!module.exports?typeof define==i||!define.amd?window.Radixx=t(n):define("Radixx",function(){return t(n)}):module.exports=t(n)}(this,function(n){var t=null,o=!1,u=!0,s="constructor",i="function";function f(){this.toString=function(){return"[object Hub]"}}Object.keys=Object.keys||function(n){var o="toString",t,u,h,f,r,e;if(typeof n=="object"||typeof n==i){t=[];for(u in fuc)hOwn.call(fuc,u)&&t.push(u);if(h=!ob.propertyIsEnumerable(o),f=[o,"toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable",s],h)for(r=0;r<f.length;r++)e=f[r],hOwn.call(fuc,e)&&t.push(e);return t}};var r={}.hasOwnProperty,e=[].slice,h=function(n,t,i){for(var u in n)r.call(n,u)&&t.call(i,n[u],u)},c=function(n,t,i){return function(){var r=e.call(arguments);return n.apply(i,t.concat(r))}};return Store=function(){return function(n){this.getTitle=function(){return n},this.toString=function(){return"[object RadixxStore]"}}}(),Action=function(){return function(n){this.getId=function(){return n},this.toString=function(){return"[object RadixxAction]"}}}(),futuresStates={STARTED:0,AWAIT:1,RESOLVED:2,REJECTED:3},formatOptions=function(n){var t={},i=String(n).split(",");return i.forEach(function(n){t[n]=u}),t.savedData=!1,t},Routines=function(n){var f=formatOptions(n),v,y,a,p,w,r=[],s=f.multiple&&[],l=function(n){for(f.savedData=!l.$decline&&f.save&&n,p=u,w=u,a=v||0,y=r.length,v=0;a<y;a++)setTimeout(c(r[a],n[1],n[0]),20);if(w=o,s&&s.length)return l(s.shift());l.$decline=o,f.savedData&&f.unpack&&(r.length=0)};return{add:function(){var n=0,t;return r&&(t=r.length,function o(t){t.forEach(function(t){var u=typeof t;u==i?n=r.push(t):!!t&&t.length&&typeof t!="string"&&o(e.call(t))})}(e.call(arguments)),p&&f.join&&(v=t,y=n,l.$decline=u,l(f.savedData),this.disable())),n},hasFn:function(n){var t=o;return h(r,function(r){typeof n==i&&n===r&&(t=u)},this),t},hasList:function(){return!!r},fireWith:function(){if(r&&(!p||s)){var n=arguments.length&&e.call(arguments)||[t,0];w?s.push(n):l(n)}},disable:function(){f.savedData||(r=s=undefined)}}},Futures=function(){var l="join",f={resolve:["done","RESOLVED",Routines([l,"save"])],reject:["fail","REJECTED",Routines([l,"save"])],notify:["progress","AWAIT",Routines([l,"multiple"])]},n=this,h=Object.keys(f),c=function(t,i,r){var o=t!="notify";return!i.length&&!r?f[t][2].fireWith:r?function(){return n.state>=0&&n.state<=1&&f[t][2].add.apply(n,e.call(arguments)),n}:function(){if(n.state>=0&&n.state<=1&&(n.state=futuresStates[f[t][1]]),f[t][2].fireWith(n===this?n:this,[].slice.call(arguments)),o){f[i[0]][2].disable(),f[i[1]][2].disable();switch(t){case"reject":case"resolve":n.state=futuresStates[f[t][1]]}}return u}},a=0,v=h.slice(),s,o={};for(s in f)r.call(f,s)&&(h.splice(a++,1),n[s]=c(s,h),n[s+"With"]=c(s,[]),o[f[s][0]]=c(s,[],u),h=v.slice());return o.state=futuresStates.STARTED,o.always=function(){return this.done.apply(n,arguments).fail.apply(n,arguments)},o.promise=function(n){if(n&&typeof n=="object"&&!n.length){for(var t in o)r.call(o,t)&&(n[t]=o[t]);return n}return o},o.then=function(){var t,r=[].slice.call(arguments);return r.forEach(function(r,u){r=typeof r==i&&r,n[f[h[u]][0]](function(){var n;try{n=r&&r.apply(this,arguments)}catch(u){n=this.reject(u)}finally{n&&typeof n.promise==i&&(t=n.promise())}})}),n.promise(t)},o.isResolved=function(){return!f.reject[2].hasList()},o.isRejected=function(){return!f.resolve[2].hasList()},o.pipe=o.then,o.promise(n),Futures.STARTED=futuresStates.STARTED,Futures.AWAITING=futuresStates.AWAIT,Futures.RESOLVED=futuresStates.RESOLVED,Futures.REJECTED=futuresStates.REJECTED,c=v=s=a=t,n instanceof Futures?n:new Futures},Observable=function(n){var b="getState",w="unsetChangeListener",p="setChangeListener";function h(){n.addEventListener?n.addEventListener("storage",it,o):n.document.attachEvent&&n.document.attachEvent("onstorage",it)}var y=t,f=n.sessionStorage,rt=n.document.documentMode||0,a=[],k={},e={},l={},d=[],v={},g=function(n){var t="__proto__";if("getPrototypeOf"in Object)return Object.getPrototypeOf(n);if(t in n){if(!r.call(n,t))return n.__proto__}else if(s in n&&!r.call(n,s))return n.constructor.prototype;return n},c=function(n){return n===void 0},nt=function(i){if(c(i)||i==="null")return t;try{return n.JSON?JSON.parse(i):new Function("return "+i)()}catch(r){return String(i)}},ut=function(n){c(n)&&(n=t);try{return JSON.stringify(n)}catch(i){return String(n)}},ft=function(){for(var i={},t,n=0;n<f.length;n++)t=f.key(n),i[t]=nt(f.getItem(t));return i},tt=function(n){var i=this;return i.put=function(t){return f.remainingSpace&&rt===8&&(f.$$key=n,f.constructor.$$currentStoreType=f),f.setItem(n,ut(t))},i.get=function(){return nt(f.getItem(n))||t},i.del=function(){return f.removeItem(n)},i},et=function(){var i=t,f=ft(),n,u;for(n in l)r.call(l,n)&&(i=l[n],i.isResolved()||i.resolve(),delete l[n]);for(u in a)r.call(a,u)&&a[u].call(t,f)},it=function(i){var o,r,u;if(i=i||n.event,f.remainingSpace&&i.source===t&&"$$key"in f&&(i.key=f.$$key,i.storageArea=f.constructor.$$currentStoreType),i.storageArea===f&&(r=i.key,!c(e[r])))for(o=e[r].$$store_listeners,u=0;u<o.length;u++)o[u].call(k[r],t)};return h.prototype.register=function(n,t){return t.$$store_listeners=[],e[n]=t,u},h.prototype.watch=function(n){a.push(n)},h.prototype.setStoreListener=function(n,t){var r=n.getTitle();c(e[r])||typeof t==i&&(k[r]=n,e[r].$$store_listeners.push(t))},h.prototype.unsetStoreListener=function(n,t){var r=n.getTitle(),u;c(e[r])||typeof t==i&&(u=e[r].$$store_listeners.indexOf(t),e[r].$$store_listeners.splice(u,1))},h.prototype.signal=function(t){if(n.setTimeout(et,0),t.source in v){for(var i in e)r.call(e,i)&&e[i].call(this.queueing,t,new tt(i));d.length=0}},h.prototype.unregister=function(n){var i;c(e[n])||(i=e[n],i.$$store_listeners.length=0,i.$$store_listeners=t,delete e[n],i=t)},h.prototype.queueing={await:function(n,r){for(var u=-1,e=n.length+u,f=t;++u<e;)f=d.indexOf(n[u])>-1?l[n[u]]:l[n[u]]=new Futures,typeof r==i&&f.then(r)}},{getInstance:function(){return y===t&&(y=new h),y},setActionVectors:function(n,i){var e=g(n),o=this.getInstance(),f=t,u;for(u in i)r.call(i,u)&&(f=i[u],e[u]=this.createActionInterface(o,f));return n},createStoreInterface:function(n,i){return function(){var u=arguments[0],r,f;return i==p?n.setStoreListener(this,u):i==w?n.unsetStoreListener(this,u):i==b?(r=new tt(this.getTitle()),f=r.get(),r=t,f):void 0}},createActionInterface:function(n,t){return function(i){var r=this.getId();c(v[r])||v[r].actionTypes.push(t),n.signal({source:r,actionType:t,actionData:i})}},watchDispatcher:function(n){var t=this.getInstance();t.watch(n)},configureDispatcher:function(){},registerAction:function(){var n=Math.random().toString(16).substr(2,13);return v[n]={actionTypes:[]},n},setStoreObserver:function(n,r){var e,u;if(typeof r!=i)return t;var s=g(n),o=this.getInstance(),h=n.getTitle(),f=t;for(o.register(h,r),e=[p,w,b],u=0;u<e.length;u++)f=e[u],s[f]=this.createStoreInterface(o,f)}}}(n),f.prototype.constructor=f,f.prototype.config=function(n){Observable.configureDispatcher(n)},f.prototype.onDispatch=function(n){Observable.watchDispatcher(n)},f.prototype.createAction=function(n){function t(){Action.apply(this,e.call(arguments))}var i=new t(Observable.registerAction());return Observable.setActionVectors(i,n)},f.prototype.createStore=function(n,t){function r(){Store.apply(this,e.call(arguments))}var i=new r(n);return Observable.setStoreObserver(i,t),i},f.prototype.mixin=function(){return function(){var n=this;return n.get=function(){this.state},n.set=function(n){this.setState(n)},{get:n.get,set:n.set}}()},new f})