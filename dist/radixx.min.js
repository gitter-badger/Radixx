/*!
  * @lib: Radixx
  * @version: 0.0.1
  * @author: Ifeora Okechukwu
  * @created: 30/12/2016
  *
  *
  * @desc: Implementation of Facebook Flux Architecture with a Twist.
  */
!function(n,t){var i="undefined";typeof module==i||!module.exports?typeof define==i||!define.amd?window.Radixx=t(n):define("Radixx",function(){return t(n)}):module.exports=t(n)}(this,function(n){var t=null,c=!1,u=!0,l="constructor",i="function";function f(){this.toString=function(){return"[object Hub]"}}Object.keys=Object.keys||function(n){var o="toString",t,u,s,f,r,e;if(typeof n=="object"||typeof n==i){t=[];for(u in fuc)hOwn.call(fuc,u)&&t.push(u);if(s=!ob.propertyIsEnumerable(o),f=[o,"toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable",l],s)for(r=0;r<f.length;r++)e=f[r],hOwn.call(fuc,e)&&t.push(e);return t}};var r={}.hasOwnProperty,e=[].slice,v=function(n,t,i){for(var u in n)r.call(n,u)&&t.call(i,n[u],u)},y=function(n,t,i){return function(){var r=e.call(arguments);return n.apply(i,r.push(r,[].concat(t)))}},p=function(){return function(n){this.getTitle=function(){return n},this.toString=function(){return"[object RadixxStore]"}}}(),w=function(){return function(n){this.getId=function(){return n},this.toString=function(){return"[object RadixxAction]"}}}(),o={STARTED:0,AWAIT:1,RESOLVED:2,REJECTED:3},b=function(n){var t={},i=String(n).split(",");return i.forEach(function(n){t[n]=u}),t.savedData=!1,t},a=function(n){var f=b(n),l,a,h,p,w,r=[],o=f.multiple&&[],s=function(n){for(f.savedData=!s.$decline&&f.save&&n,p=u,w=u,h=l||0,a=r.length,l=0;h<a;h++)setTimeout(y(r[h],n[1],n[0]),20);if(w=c,o&&o.length)return s(o.shift());s.$decline=c,f.savedData&&f.unpack&&(r.length=0)};return{add:function(){var n=0,t;return r&&(t=r.length,function o(t){t.forEach(function(t){var u=typeof t;u==i?n=r.push(t):!!t&&t.length&&typeof t!="string"&&o(e.call(t))})}(e.call(arguments)),p&&f.join&&(l=t,a=n,s.$decline=u,s(f.savedData),this.disable())),n},hasFn:function(n){var t=c;return v(r,function(r){typeof n==i&&n===r&&(t=u)},this),t},hasList:function(){return!!r},fireWith:function(){if(r&&(!p||o)){var n=arguments.length&&e.call(arguments)||[t,0];w?o.push(n):s(n)}},disable:function(){f.savedData||(r=o=undefined)}}},s=function(){var y="join",f={resolve:["done","RESOLVED",a([y,"save"])],reject:["fail","REJECTED",a([y,"save"])],notify:["progress","AWAIT",a([y,"multiple"])]},n=this,l=Object.keys(f),v=function(t,i,r){var s=t!="notify";return!i.length&&!r?f[t][2].fireWith:r?function(){return n.state>=0&&n.state<=1&&f[t][2].add.apply(n,e.call(arguments)),n}:function(){if(n.state>=0&&n.state<=1&&(n.state=o[f[t][1]]),f[t][2].fireWith(n===this?n:this,[].slice.call(arguments)),s){f[i[0]][2].disable(),f[i[1]][2].disable();switch(t){case"reject":case"resolve":n.state=o[f[t][1]]}}return u}},p=0,w=l.slice(),c,h={};for(c in f)r.call(f,c)&&(l.splice(p++,1),n[c]=v(c,l),n[c+"With"]=v(c,[]),h[f[c][0]]=v(c,[],u),l=w.slice());return h.state=o.STARTED,h.always=function(){return this.done.apply(n,arguments).fail.apply(n,arguments)},h.promise=function(n){if(n&&typeof n=="object"&&!n.length){for(var t in h)r.call(h,t)&&(n[t]=h[t]);return n}return h},h.then=function(){var t,r=[].slice.call(arguments);return r.forEach(function(r,u){r=typeof r==i&&r,n[f[l[u]][0]](function(){var n;try{n=r&&r.apply(this,arguments)}catch(u){n=this.reject(u)}finally{n&&typeof n.promise==i&&(t=n.promise())}})}),n.promise(t)},h.isResolved=function(){return!f.reject[2].hasList()},h.isRejected=function(){return!f.resolve[2].hasList()},h.pipe=h.then,h.promise(n),s.STARTED=o.STARTED,s.AWAITING=o.AWAIT,s.RESOLVED=o.RESOLVED,s.REJECTED=o.REJECTED,v=w=c=p=t,n instanceof s?n:new s},h=function(n){var k="getState",b="unsetChangeListener",w="setChangeListener";function o(){n.addEventListener?n.addEventListener("storage",rt,c):n.document.attachEvent&&n.document.attachEvent("onstorage",rt)}var p=t,f=n.sessionStorage,ut=n.document.documentMode||0,v=[],d={},e={},a={},g=[],y={},nt=function(n){var t="__proto__";if("getPrototypeOf"in Object)return Object.getPrototypeOf(n);if(t in n){if(!r.call(n,t))return n.__proto__}else if(l in n&&!r.call(n,l))return n.constructor.prototype;return n},h=function(n){return n===void 0},tt=function(i){if(h(i)||i==="null")return t;try{return n.JSON?JSON.parse(i):new Function("return "+i)()}catch(r){return String(i)}},ft=function(n){h(n)&&(n=t);try{return JSON.stringify(n)}catch(i){return String(n)}},et=function(){for(var i={},t,n=0;n<f.length;n++)t=f.key(n),i[t]=tt(f.getItem(t));return i},it=function(n){var i=this;return i.put=function(t){return f.remainingSpace&&ut===8&&(f.$$key=n,f.constructor.$$currentStoreType=f),f.setItem(n,ft(t))},i.get=function(){return tt(f.getItem(n))||t},i.del=function(){return f.removeItem(n)},i},ot=function(){var i=t,f=et(),n,u;for(n in a)r.call(a,n)&&(i=a[n],i.isResolved()||i.resolve(),delete a[n]);for(u in v)r.call(v,u)&&v[u].call(t,f)},rt=function(i){var o,r,u;if(i=i||n.event,f.remainingSpace&&i.source===t&&"$$key"in f&&(i.key=f.$$key,i.storageArea=f.constructor.$$currentStoreType),i.storageArea===f&&(r=i.key,!h(e[r])))for(o=e[r].$$store_listeners,u=0;u<o.length;u++)o[u].call(d[r],t)};return o.prototype.register=function(n,t){return t.$$store_listeners=[],e[n]=t,u},o.prototype.watch=function(n){v.push(n)},o.prototype.setStoreListener=function(n,t){var r=n.getTitle();h(e[r])||typeof t==i&&(d[r]=n,e[r].$$store_listeners.push(t))},o.prototype.unsetStoreListener=function(n,t){var r=n.getTitle(),u;h(e[r])||typeof t==i&&(u=e[r].$$store_listeners.indexOf(t),e[r].$$store_listeners.splice(u,1))},o.prototype.signal=function(t){if(n.setTimeout(ot,0),t.source in y){for(var i in e)r.call(e,i)&&e[i].call(this.queueing,t,new it(i));g.length=0}},o.prototype.unregister=function(n){var i;h(e[n])||(i=e[n],i.$$store_listeners.length=0,i.$$store_listeners=t,delete e[n],i=t)},o.prototype.queueing={await:function(n,r){for(var u=-1,e=n.length+u,f=t;++u<e;)f=g.indexOf(n[u])>-1?a[n[u]]:a[n[u]]=new s,typeof r==i&&f.then(r)}},{getInstance:function(){return p===t&&(p=new o),p},setActionVectors:function(n,i){var e=nt(n),o=this.getInstance(),f=t,u;for(u in i)r.call(i,u)&&(f=i[u],e[u]=this.createActionInterface(o,f));return n},createStoreInterface:function(n,i){return function(){var u=arguments[0],r,f;return i==w?n.setStoreListener(this,u):i==b?n.unsetStoreListener(this,u):i==k?(r=new it(this.getTitle()),f=r.get(),r=t,f):void 0}},createActionInterface:function(n,t){return function(i){var r=this.getId();h(y[r])||y[r].actionTypes.push(t),n.signal({source:r,actionType:t,actionData:i})}},watchDispatcher:function(n){var t=this.getInstance();t.watch(n)},configureDispatcher:function(){},registerAction:function(){var n=Math.random().toString(16).substr(2,13);return y[n]={actionTypes:[]},n},setStoreObserver:function(n,r){var e,u;if(typeof r!=i)return t;var s=nt(n),o=this.getInstance(),h=n.getTitle(),f=t;for(o.register(h,r),e=[w,b,k],u=0;u<e.length;u++)f=e[u],s[f]=this.createStoreInterface(o,f)}}}(n);return f.prototype.constructor=f,f.prototype.config=function(n){h.configureDispatcher(n)},f.prototype.onDispatch=function(n){h.watchDispatcher(n)},f.prototype.createAction=function(n){function t(){w.apply(this,e.call(arguments))}var i=new t(h.registerAction());return h.setActionVectors(i,n)},f.prototype.createStore=function(n,t){function r(){p.apply(this,e.call(arguments))}var i=new r(n);return h.setStoreObserver(i,t),i},f.prototype.mixin=function(){return function(){var n=this;return n.get=function(){this.state},n.set=function(n){this.setState(n)},{get:n.get,set:n.set}}()},new f})
